{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "AI Session Execute",
  "description": "Executes an action proposed by the AI agent (code/test/shell)",
  "type": "object",
  "properties": {
    "sessionId": {
      "type": "string",
      "description": "Target session identifier"
    },
    "action": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "enum": ["code_generate", "test_run", "shell_command"],
          "description": "Action category"
        },
        "payload": {
          "type": "object",
          "description": "Action-specific payload"
        },
        "dryRun": {
          "type": "boolean",
          "default": false,
          "description": "If true, returns command preview without executing"
        }
      },
      "required": ["type", "payload"]
    }
  },
  "required": ["sessionId", "action"],
  "response": {
    "type": "object",
    "properties": {
      "actionId": { "type": "string" },
      "status": {
        "type": "string",
        "enum": ["pending", "queued", "started"]
      }
    },
    "required": ["actionId", "status"]
  }
}
