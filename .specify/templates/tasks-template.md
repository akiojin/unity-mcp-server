---

description: "機能実装のタスクリストテンプレート"
---

# タスク: [機能名]

**入力**: `/specs/SPEC-[UUID8桁]/` の設計ドキュメント  
**前提条件**: plan.md（必須）, spec.md（必須: ユーザーストーリー）, research.md, data-model.md, contracts/

**テスト**: 下の例にはテストタスクを含みます。テストの有無は仕様やユーザー指示に従って調整してください。

**構成**: タスクはユーザーストーリー単位でグルーピングし、各ストーリーを独立して実装・検証できるようにします。

## フォーマット: `[ID] [P?] [Story] 説明`

- **[P]**: 並列実行可能（別ファイル、依存なし）
- **[Story]**: 対象ユーザーストーリー（例: US1, US2, US3）
- 説明には正確なファイルパスを含める

## パス規約

- **単一プロジェクト**: リポジトリルートの `src/`, `tests/`
- **Webアプリ**: `backend/src/`, `frontend/src/`
- **モバイル**: `api/src/`, `ios/src/` または `android/src/`
- 下の例は単一プロジェクトを前提（plan.md の構造に合わせて調整）

<!-- 
  ============================================================================
  重要: 下のタスクは「例示用のサンプルタスク」です。
  
  /speckit.tasks コマンドは、以下に基づいて実タスクへ置き換える必要があります:
  - spec.md のユーザーストーリー（優先度 P1, P2, P3...）
  - plan.md の実装要件
  - data-model.md のエンティティ
  - contracts/ のAPIエンドポイント
  
  タスクはユーザーストーリー単位で整理し、各ストーリーが:
  - 独立して実装可能
  - 独立してテスト可能
  - MVPとして段階的に提供可能
  となるようにしてください。
  
  生成された tasks.md にこのサンプルを残さないでください。
  ============================================================================
-->

## Phase 1: セットアップ（共通インフラ）

**目的**: プロジェクト初期化と基本構造

- [ ] T001 実装計画に従ってプロジェクト構造を作成
- [ ] T002 [language] プロジェクトを [framework] 依存関係で初期化
- [ ] T003 [P] リンティングとフォーマットツールを構成

---

## Phase 2: 基盤（全ストーリーの前提・ブロッカー）

**目的**: どのユーザーストーリーにも必要な基盤。ここが完了しない限りストーリー実装は開始しない。

**⚠️ 重要**: このフェーズが完了するまで、ユーザーストーリー作業は開始できません。

例（プロジェクトに合わせて調整）:

- [ ] T004 DBスキーマとマイグレーション基盤を準備
- [ ] T005 [P] 認証/認可の基盤を実装
- [ ] T006 [P] APIルーティング/ミドルウェア構造を準備
- [ ] T007 すべてのストーリーが依存するベースエンティティ/モデルを作成
- [ ] T008 エラーハンドリングとロギング基盤を構成
- [ ] T009 環境設定（config）管理を整備

**チェックポイント**: 基盤完了 → 各ユーザーストーリーを並列/順次に実装可能

---

## Phase 3: ユーザーストーリー1 - [タイトル] (優先度: P1) 🎯 MVP

**ゴール**: [このストーリーが提供する価値を短く]

**独立テスト**: [このストーリー単体での検証方法]

### ユーザーストーリー1のテスト（必要に応じて）⚠️

> **注意**: テストを含める場合は、先に書き、実装前に失敗（RED）することを確認してください。

- [ ] T010 [P] [US1] tests/contract/test_[name].py に [endpoint] のコントラクトテスト
- [ ] T011 [P] [US1] tests/integration/test_[name].py に [user journey] の統合テスト

### ユーザーストーリー1の実装

- [ ] T012 [P] [US1] src/models/[entity1].py に [Entity1] モデルを作成
- [ ] T013 [P] [US1] src/models/[entity2].py に [Entity2] モデルを作成
- [ ] T014 [US1] src/services/[service].py に [Service] を実装（T012, T013 に依存）
- [ ] T015 [US1] src/[location]/[file].py に [endpoint/feature] を実装
- [ ] T016 [US1] バリデーションとエラーハンドリングを追加
- [ ] T017 [US1] ユーザーストーリー1の操作ログを追加

**チェックポイント**: この時点でユーザーストーリー1は独立して動作・検証可能な状態

---

## Phase 4: ユーザーストーリー2 - [タイトル] (優先度: P2)

**ゴール**: [このストーリーが提供する価値を短く]

**独立テスト**: [このストーリー単体での検証方法]

### ユーザーストーリー2のテスト（必要に応じて）⚠️

- [ ] T018 [P] [US2] tests/contract/test_[name].py に [endpoint] のコントラクトテスト
- [ ] T019 [P] [US2] tests/integration/test_[name].py に [user journey] の統合テスト

### ユーザーストーリー2の実装

- [ ] T020 [P] [US2] src/models/[entity].py に [Entity] モデルを作成
- [ ] T021 [US2] src/services/[service].py に [Service] を実装
- [ ] T022 [US2] src/[location]/[file].py に [endpoint/feature] を実装
- [ ] T023 [US2] 必要に応じてユーザーストーリー1のコンポーネントと統合

**チェックポイント**: ユーザーストーリー1と2がどちらも独立して動作する状態

---

## Phase 5: ユーザーストーリー3 - [タイトル] (優先度: P3)

**ゴール**: [このストーリーが提供する価値を短く]

**独立テスト**: [このストーリー単体での検証方法]

### ユーザーストーリー3のテスト（必要に応じて）⚠️

- [ ] T024 [P] [US3] tests/contract/test_[name].py に [endpoint] のコントラクトテスト
- [ ] T025 [P] [US3] tests/integration/test_[name].py に [user journey] の統合テスト

### ユーザーストーリー3の実装

- [ ] T026 [P] [US3] src/models/[entity].py に [Entity] モデルを作成
- [ ] T027 [US3] src/services/[service].py に [Service] を実装
- [ ] T028 [US3] src/[location]/[file].py に [endpoint/feature] を実装

**チェックポイント**: すべてのユーザーストーリーが独立して動作する状態

---

[必要に応じて、同様のパターンでユーザーストーリーのフェーズを追加]

---

## Phase N: 仕上げ（横断的改善）

**目的**: 複数のユーザーストーリーにまたがる改善

- [ ] TXXX [P] docs/ のドキュメント更新
- [ ] TXXX コード整理とリファクタリング
- [ ] TXXX 横断的なパフォーマンス最適化
- [ ] TXXX [P] 追加のユニットテスト（必要に応じて）を tests/unit/ に追加
- [ ] TXXX セキュリティ強化
- [ ] TXXX quickstart.md の検証を実行

---

## 依存関係と実行順

### フェーズ依存関係

- **セットアップ（Phase 1）**: 依存なし（すぐ開始可能）
- **基盤（Phase 2）**: セットアップ完了に依存（全ストーリーをブロック）
- **ユーザーストーリー（Phase 3+）**: 基盤完了に依存
  - その後は並列（体制があれば）または優先度順（P1 → P2 → P3）で進行
- **仕上げ（最終フェーズ）**: 必要なストーリーの完了に依存

### ユーザーストーリー依存関係

- **ユーザーストーリー1（P1）**: 基盤（Phase 2）完了後に開始可能
- **ユーザーストーリー2（P2）**: 基盤完了後に開始可能（必要に応じてUS1と統合）
- **ユーザーストーリー3（P3）**: 基盤完了後に開始可能（必要に応じてUS1/US2と統合）

### 各ユーザーストーリー内の順序

- テスト（含める場合）は先に書いて失敗確認（RED）
- モデル → サービス → エンドポイント/UI の順
- 実装 → 結合の順
- ストーリー完了時点で独立検証できる状態にする

### 並列化の機会

- [P] のセットアップタスクは並列実行可能
- 基盤フェーズ内の [P] タスクは並列実行可能
- 基盤完了後、体制があれば複数ストーリーを並列実行可能

---

## 並列実行例: ユーザーストーリー1

```bash
# ユーザーストーリー1のテストを同時に開始（必要に応じて）
Task: "tests/contract/test_[name].py に [endpoint] のコントラクトテスト"
Task: "tests/integration/test_[name].py に [user journey] の統合テスト"

# ユーザーストーリー1のモデル作成を並列で開始
Task: "src/models/[entity1].py に [Entity1] モデルを作成"
Task: "src/models/[entity2].py に [Entity2] モデルを作成"
```

---

## 実装戦略

### MVPファースト（ユーザーストーリー1のみ）

1. Phase 1（セットアップ）を完了
2. Phase 2（基盤）を完了（必須）
3. Phase 3（ユーザーストーリー1）を完了
4. **停止して検証**: ユーザーストーリー1を独立して検証
5. 準備ができていればデプロイ/デモ

### 段階的デリバリー

1. セットアップ + 基盤 → 土台完成
2. ユーザーストーリー1 → 独立検証 → デプロイ/デモ（MVP）
3. ユーザーストーリー2 → 独立検証 → デプロイ/デモ
4. ユーザーストーリー3 → 独立検証 → デプロイ/デモ
5. 各ストーリーは前段を壊さず価値を追加

### 複数人での並列戦略

複数開発者がいる場合:

1. チームでセットアップ + 基盤を完了
2. 基盤完了後:
   - 開発者A: ユーザーストーリー1
   - 開発者B: ユーザーストーリー2
   - 開発者C: ユーザーストーリー3
3. 各ストーリーを独立して完了・統合

---

## メモ

- [P] タスク = 別ファイルかつ依存なし
- [Story] ラベルでストーリーとの対応を明確化
- 各ストーリーは独立して完了・検証できる状態にする
- テストを含める場合は必ず RED を確認してから実装する
- 各チェックポイントで停止して独立検証を行う
- 避けること: 曖昧なタスク、同一ファイル競合、独立性を壊すストーリー横断の依存
