# 機能仕様書: [機能名]

**機能ID**: `SPEC-[UUID8桁]` (例: `SPEC-a1b2c3d4`)
**作成日**: [日付]
**ステータス**: 下書き
**入力**: ユーザー説明: "$ARGUMENTS"

## 実行フロー (main)
```
1. 入力からユーザー説明を解析
   → 空の場合: ERROR "機能説明が提供されていません"
2. 説明から主要概念を抽出
   → 識別: アクター、アクション、データ、制約
3. 不明確な側面ごとに:
   → [要明確化: 具体的な質問]でマーク
4. ユーザーシナリオ＆テストセクションを記入
   → 明確なユーザーフローがない場合: ERROR "ユーザーシナリオを特定できません"
5. 機能要件を生成
   → 各要件はテスト可能でなければならない
   → 曖昧な要件をマーク
6. 主要エンティティを識別 (データが関与する場合)
7. レビューチェックリストを実行
   → [要明確化]がある場合: WARN "仕様に不確実性があります"
   → 実装詳細が見つかった場合: ERROR "技術詳細を削除してください"
8. 戻り値: SUCCESS (計画準備完了)
```

---

## ⚡ クイックガイドライン
- ✅ ユーザーが「何を」必要とし「なぜ」必要なのかに焦点を当てる
- ❌ 「どのように」実装するかを避ける (技術スタック、API、コード構造なし)
- 👥 ビジネス関係者向けに記述 (開発者向けではない)

### セクション要件
- **必須セクション**: すべての機能で完成させる必要がある
- **オプションセクション**: 機能に関連する場合のみ含める
- セクションが該当しない場合は、完全に削除する ("N/A"として残さない)

### AI生成時の注意
ユーザープロンプトからこの仕様を作成する際:
1. **すべての曖昧さをマーク**: 推測が必要な場合は[要明確化: 具体的な質問]を使用
2. **推測しない**: プロンプトで何かが指定されていない場合 (例: 認証方法なしの"ログインシステム")、マークする
3. **テスターのように考える**: すべての曖昧な要件は"テスト可能で曖昧さがない"チェックリスト項目で失敗するはず
4. **一般的な不十分な指定領域**:
   - ユーザータイプと権限
   - データ保持/削除ポリシー
   - パフォーマンス目標とスケール
   - エラーハンドリング動作
   - 統合要件
   - セキュリティ/コンプライアンス要件

---

## ユーザーシナリオ＆テスト *(必須)*

### 主要ユーザーストーリー
[主要なユーザージャーニーを平易な言葉で説明]

### 受け入れシナリオ
1. **前提** [初期状態]、**実行** [アクション]、**結果** [期待される結果]
2. **前提** [初期状態]、**実行** [アクション]、**結果** [期待される結果]

### エッジケース
- [境界条件]の場合、何が起こるか?
- システムは[エラーシナリオ]をどのように処理するか?

## 要件 *(必須)*

### 機能要件
- **FR-001**: システムは[具体的な機能、例: "ユーザーがアカウントを作成できる"]必要がある
- **FR-002**: システムは[具体的な機能、例: "メールアドレスを検証する"]必要がある
- **FR-003**: ユーザーは[主要な操作、例: "パスワードをリセットできる"]ことができる必要がある
- **FR-004**: システムは[データ要件、例: "ユーザー設定を永続化する"]必要がある
- **FR-005**: システムは[動作、例: "すべてのセキュリティイベントを記録する"]必要がある

*不明確な要件をマークする例:*
- **FR-006**: システムは[要明確化: 認証方法が指定されていません - メール/パスワード、SSO、OAuth?]経由でユーザーを認証する必要がある
- **FR-007**: システムは[要明確化: 保持期間が指定されていません]の間ユーザーデータを保持する必要がある

### 主要エンティティ *(機能がデータを含む場合に含める)*
- **[エンティティ1]**: [何を表すか、実装なしの主要属性]
- **[エンティティ2]**: [何を表すか、他のエンティティとの関係]

---

## レビュー＆受け入れチェックリスト
*ゲート: main()実行中に自動チェックを実行*

### コンテンツ品質
- [ ] 実装詳細なし (言語、フレームワーク、API)
- [ ] ユーザー価値とビジネスニーズに焦点
- [ ] 非技術関係者向けに記述
- [ ] すべての必須セクション完成

### 要件完全性
- [ ] [要明確化]マーカーが残っていない
- [ ] 要件はテスト可能で曖昧さがない
- [ ] 成功基準は測定可能
- [ ] スコープが明確に境界付けられている
- [ ] 依存関係と前提条件が識別されている

---

## 実行ステータス
*main()処理中に更新*

- [ ] ユーザー説明を解析済み
- [ ] 主要概念を抽出済み
- [ ] 曖昧さをマーク済み
- [ ] ユーザーシナリオを定義済み
- [ ] 要件を生成済み
- [ ] エンティティを識別済み
- [ ] レビューチェックリスト合格

---
