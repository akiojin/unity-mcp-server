# 機能仕様書: [機能名]

**機能ID**: `SPEC-[UUID8桁]`
**作成日**: [日付]
**ステータス**: 下書き
**入力**: ユーザー説明: "$ARGUMENTS"

## ユーザーシナリオ＆テスト *(必須)*

<!--
  重要: ユーザーストーリーは重要度順に並べた「ユーザージャーニー」として優先度付けする必要があります。
  各ユーザーストーリー/ジャーニーは独立してテスト可能でなければなりません - つまり、そのうちの1つだけを実装しても、
  価値を提供する実行可能なMVP（Minimum Viable Product）が得られるはずです。

  各ストーリーに優先度（P1, P2, P3など）を割り当てます。P1が最も重要です。
  各ストーリーを独立した機能のスライスとして考えてください：
  - 独立して開発可能
  - 独立してテスト可能
  - 独立してデプロイ可能
  - ユーザーに独立して実演可能
-->

### ユーザーストーリー1 - [簡潔なタイトル] (優先度: P1)

[このユーザージャーニーを平易な言葉で説明]

**この優先度の理由**: [価値とこの優先度レベルの説明]

**独立テスト**: [独立してテスト可能な方法を説明 - 例: "「特定のアクション」によって完全にテストでき、「特定の価値」を提供します"]

**受け入れシナリオ**:

1. **前提** [初期状態]、**実行** [アクション]、**結果** [期待される結果]
2. **前提** [初期状態]、**実行** [アクション]、**結果** [期待される結果]

---

### ユーザーストーリー2 - [簡潔なタイトル] (優先度: P2)

[このユーザージャーニーを平易な言葉で説明]

**この優先度の理由**: [価値とこの優先度レベルの説明]

**独立テスト**: [独立してテスト可能な方法を説明]

**受け入れシナリオ**:

1. **前提** [初期状態]、**実行** [アクション]、**結果** [期待される結果]

---

### ユーザーストーリー3 - [簡潔なタイトル] (優先度: P3)

[このユーザージャーニーを平易な言葉で説明]

**この優先度の理由**: [価値とこの優先度レベルの説明]

**独立テスト**: [独立してテスト可能な方法を説明]

**受け入れシナリオ**:

1. **前提** [初期状態]、**実行** [アクション]、**結果** [期待される結果]

---

[必要に応じてさらにユーザーストーリーを追加し、それぞれに優先度を割り当てます]

### エッジケース

<!--
  要対応: このセクションの内容はプレースホルダーです。
  適切なエッジケースを記入してください。
-->

- [境界条件]の場合、何が起こるか?
- システムは[エラーシナリオ]をどのように処理するか?

## 要件 *(必須)*

<!--
  要対応: このセクションの内容はプレースホルダーです。
  適切な機能要件を記入してください。
-->

### 機能要件

- **FR-001**: システムは[具体的な機能、例: "ユーザーがアカウントを作成できる"]必要がある
- **FR-002**: システムは[具体的な機能、例: "メールアドレスを検証する"]必要がある
- **FR-003**: ユーザーは[主要な操作、例: "パスワードをリセットできる"]ことができる必要がある
- **FR-004**: システムは[データ要件、例: "ユーザー設定を永続化する"]必要がある
- **FR-005**: システムは[動作、例: "すべてのセキュリティイベントを記録する"]必要がある

*不明確な要件をマークする例:*

- **FR-006**: システムは[要明確化: 認証方法が指定されていません - メール/パスワード、SSO、OAuth?]経由でユーザーを認証する必要がある
- **FR-007**: システムは[要明確化: 保持期間が指定されていません]の間ユーザーデータを保持する必要がある

### 主要エンティティ *(機能がデータを含む場合に含める)*

- **[エンティティ1]**: [何を表すか、実装なしの主要属性]
- **[エンティティ2]**: [何を表すか、他のエンティティとの関係]

---

## スコープ外 *(オプション)*

以下の機能は本仕様のスコープ外とし、将来のバージョンで対応予定:

- [機能A]
- [機能B]

---

## 技術制約 *(該当する場合)*

- [制約1 - 例: "特定のプラットフォーム/ブラウザのみサポート"]
- [制約2 - 例: "特定のAPIバージョンが必要"]

---

## 前提条件 *(該当する場合)*

この機能は以下を前提とします:

- [前提条件1]
- [前提条件2]

---

## 依存関係 *(該当する場合)*

この機能は以下に依存します:

- [依存する機能/システムA]
- [依存する機能/システムB]

---

## 成功基準 *(必須)*

以下の成功基準を満たす必要があります:

1. [測定可能な成功基準1 - 例: "ユーザーは3分以内にチェックアウトを完了できる"]
2. [測定可能な成功基準2 - 例: "システムは10,000人の同時ユーザーをサポートする"]
3. [測定可能な成功基準3 - 例: "検索の95%が1秒以内に結果を返す"]

**成功基準ガイドライン**:

成功基準は以下の条件を満たす必要があります:

1. **測定可能**: 具体的な指標を含む（時間、パーセンテージ、カウント、レート）
2. **技術に依存しない**: フレームワーク、言語、データベース、ツールに言及しない
3. **ユーザー重視**: システム内部ではなく、ユーザー/ビジネスの視点から結果を説明
4. **検証可能**: 実装の詳細を知らなくてもテスト/検証できる

**良い例**:

- "ユーザーは3分以内にチェックアウトを完了できる"
- "システムは10,000人の同時ユーザーをサポートする"
- "検索の95%が1秒以内に結果を返す"
- "タスク完了率が40%向上する"

**悪い例**（実装に焦点を当てている）:

- "APIレスポンス時間が200ms以内" （技術的すぎる、"ユーザーは結果を即座に見る"を使用）
- "データベースが1000 TPSを処理できる" （実装の詳細、ユーザー向けの指標を使用）
- "Reactコンポーネントが効率的にレンダリングされる" （フレームワーク固有）
- "Redisキャッシュヒット率が80%以上" （技術固有）

---

## ⚡ クイックガイドライン

- ✅ ユーザーが「何を」必要とし「なぜ」必要なのかに焦点を当てる
- ❌ 「どのように」実装するかを避ける (技術スタック、API、コード構造なし)
- 👥 ビジネス関係者向けに記述 (開発者向けではない)

### セクション要件

- **必須セクション**: すべての機能で完成させる必要がある
- **オプションセクション**: 機能に関連する場合のみ含める
- セクションが該当しない場合は、完全に削除する ("N/A"として残さない)

### AI生成時の注意

ユーザープロンプトからこの仕様を作成する際:

1. **情報に基づいた推測**: コンテキスト、業界標準、一般的なパターンを使用してギャップを埋める
2. **仮定を文書化**: 仮定セクションに妥当なデフォルトを記録する
3. **明確化を制限**: 最大3つの[要明確化]マーカー - 以下の重要な決定にのみ使用:
   - 機能のスコープやユーザー体験に大きく影響する
   - 異なる影響を持つ複数の妥当な解釈がある
   - 妥当なデフォルトが存在しない
4. **明確化の優先順位付け**: スコープ > セキュリティ/プライバシー > ユーザー体験 > 技術的詳細
5. **テスターのように考える**: すべての曖昧な要件は"テスト可能で曖昧さがない"チェックリスト項目で失敗するはず
6. **一般的な明確化が必要な領域**（妥当なデフォルトが存在しない場合のみ）:
   - 機能のスコープと境界（特定のユースケースを含む/除外する）
   - ユーザータイプと権限（複数の矛盾する解釈が可能な場合）
   - セキュリティ/コンプライアンス要件（法的/財務的に重要な場合）

**妥当なデフォルトの例**（これらについて質問しない）:

- データ保持: ドメインの業界標準慣行
- パフォーマンス目標: 特に指定がない限り、標準的なWeb/モバイルアプリの期待値
- エラーハンドリング: 適切なフォールバックを持つユーザーフレンドリーなメッセージ
- 認証方法: Webアプリの標準的なセッションベースまたはOAuth2
- 統合パターン: 特に指定がない限りRESTful API
