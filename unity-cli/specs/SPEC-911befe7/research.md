# Research: マルチインスタンス安全切替 CLI (SPEC-911befe7)

## 決定
- インスタンス ID は `host:port` をそのまま使用し、一意性と可読性を両立。
- 検出は設定ファイル/CLI 引数のポート一覧 + ヘルスチェック ping (tcp connect) で実施。
- タイムアウトは 1s、失敗時は即エラーを返し再選択ガイドを表示。
- set-active はアトミックに書き換え、直後に確認 ping を実行して結果を返す。

## 未解決/要確認
- ポート一覧の取得元: 環境変数/設定ファイル/CLI 引数の優先順位。
- 同時 set-active リクエストの排他方式（単純ロック vs イベントキュー）。

## 参考
- net.Socket の接続タイムアウトで疎通可否を高速判定。
- CLI 出力は JSON/テーブル両対応（最低 JSON を保証）。
