#!/bin/sh
set -e

CHANGED_FILES=$(git diff-tree -r --name-only --no-commit-id ORIG_HEAD HEAD)

if echo "$CHANGED_FILES" | grep -Eq '(^|/)(package\.json|pnpm-lock\.yaml)$'; then
  echo ""
  echo "package.json or pnpm-lock.yaml changed."
  echo "Run 'pnpm install' if you use Node-based tooling."
  echo ""
fi

if echo "$CHANGED_FILES" | grep -Eq '(^|/)(Cargo\.toml|Cargo\.lock)$'; then
  echo ""
  echo "Cargo dependencies changed."
  echo "Run 'cargo fetch' to warm the local cache."
  echo ""
fi
