---
description: 自然言語の要件説明から、機能仕様（spec.md）を作成または更新します（ブランチ作成なし）。
---

## ユーザー入力

```text
$ARGUMENTS
```

空でない場合、続行する前にユーザー入力を考慮する**必要があります**。

## 概要

`/speckit.specify` の後にユーザーが入力したテキストが要件の説明です。`$ARGUMENTS` が文字通り表示されていても、この会話で常に利用可能であると仮定してください。ユーザーが空のコマンドを提供した場合を除き、繰り返しを求めないでください。

## 実行手順

1. リポジトリルートから `.specify/scripts/bash/create-new-feature.sh --json "$ARGUMENTS"` を実行し、JSON出力から以下を取得します（パスはすべて絶対パス）:
   - `FEATURE_ID`（例: `SPEC-a1b2c3d4`）
   - `FEATURE_DIR`
   - `SPEC_FILE`
   - `SPECS_README`（`specs/specs.md`。要件一覧はスクリプトが自動更新します）

2. `.specify/templates/spec-template.md` を読み込み、必須セクションと見出し構造を理解します。

3. `SPEC_FILE` に、テンプレート構造を保ったまま仕様を書きます:
   - 「何を」「なぜ」を中心に書く（実装方法・技術スタック・API・コード構造は書かない）
   - ユーザーストーリーは優先度順（P1→P2→P3）で、**独立してテスト可能**にする
   - 要件はテスト可能な文で書く（曖昧語を避ける）

4. 不明点がある場合:
   - コンテキストと一般的な業界標準で合理的に補完する
   - 複数の解釈がありスコープやUXに大きく影響する場合のみ、`[要明確化: 質問]` を付ける
   - **`[要明確化]` は最大3つまで**

5. 仕様品質チェックリストを作成します（ファイル書き込みあり）:
   - `FEATURE_DIR/checklists/requirements.md` を作成
   - `.specify/templates/checklist-template.md` をベースに、少なくとも以下の観点を含める:
     - 実装詳細が混入していない
     - 必須セクションが埋まっている
     - 要件がテスト可能で曖昧さがない
     - ユーザーストーリーが独立して検証できる
     - 成功基準が測定可能で技術非依存

6. 最後に、ユーザーへ以下を返します:
   - `FEATURE_ID`
   - `SPEC_FILE` のパス
   - `specs/specs.md` が更新されている旨
   - 次ステップ（`/speckit.plan`）への案内

## 注意

- Speckitは**Gitブランチを作成しません**（要件は `specs/SPEC-xxxxxxxx/` で管理します）。
