---
description: 現在の spec.md の曖昧点を最大5問の高優先度質問で解消し、回答をspecへ反映します。
---

## ユーザー入力

```text
$ARGUMENTS
```

空でない場合、続行する前にユーザー入力を考慮する**必要があります**。

## 目的

`/speckit.plan` の前に、仕様の曖昧さ/未決定事項を減らし、後工程の手戻りリスクを下げます。

## 実行手順

1. リポジトリルートから `.specify/scripts/bash/check-prerequisites.sh --json --paths-only` を**1回だけ**実行し、`FEATURE_SPEC`（spec.mdの絶対パス）と `FEATURE_DIR` を取得します。

2. spec.md を読み込み、曖昧点をスキャンします（例）:
   - スコープ/境界（含む/含まない）
   - 役割/権限（誰が何できるか）
   - 例外/エラー時の挙動
   - 成功基準の測定可能性
   - セキュリティ/プライバシー（重要な前提）
   - データの一意性/ライフサイクル（データがある場合）

3. 質問を**最大5問**に絞って、**1問ずつ**提示します:
   - それぞれが「実装/テスト/UX/運用」に実質的影響を持つものだけ
   - 可能なら2〜5択、または「5語以内」で答えられる形式にする
   - 先に次の質問を並べて提示しない

4. 回答を受け取ったら、spec.md に反映します（ファイル書き込みあり）:
   - `## Clarifications` セクションがなければ追加
   - `### Session YYYY-MM-DD` に、`- Q: ... → A: ...` を追記
   - 影響するセクション（要件/ストーリー/成功基準/エッジケースなど）へ具体的に反映
   - 矛盾する古い記述が残らないよう置換する

5. 最後にユーザーへ以下を報告します:
   - 質問数（≤5）
   - 更新した spec.md のパス
   - 触ったセクション
   - まだ残る重要な不明点（あれば）
   - 次ステップ（`/speckit.plan`）の推奨
